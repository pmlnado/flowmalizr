df <- df %>%
mutate(cell_from_total = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
df <- readxl::read_excel("example_data/example_data.xlsx")
df <- tidyr::pivot_longer(df, cols = -c(1:3))
flowmalizr <- function(df){
df <- df %>%
mutate(cell_from_total = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
library(tidyverse)
df <- readxl::read_excel("example_data/example_data.xlsx")
df <- tidyr::pivot_longer(df, cols = -c(1:3))
flowmalizr <- function(df){
df <- df %>%
mutate(cell_from_total = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate(cell_from_total = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells_from_total) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate(cell = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
df <- readxl::read_excel("example_data/example_data.xlsx")
df <- tidyr::pivot_longer(df, cols = -c(1:3))
flowmalizr <- function(df){
df <- df %>%
mutate(cell = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate(cells = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr <- function(df){
df <- df %>%
mutate(cells = total_cell_count_per_mL*value/live_cells) %>%
arrange(cells) %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 4, 6)
return(df)
}
flowmalizr <- function(df){
df <- df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 4, 6)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 2, 4, 6)
return(df)
}
flowmalizr(df)
df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 2, 4, 6) %>%
mutate('percentage of total' = `cells from total`/total_cell_count_per_mL)
df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
arrange('cells from total') %>%
select(1, 2, 4, 6) %>%
mutate('percentage of total' = `cells from total`/total_cell_count_per_mL*100)
return(df)
df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
select(1, 2, 4, 6) %>%
mutate('percentage of total' = `cells from total`/total_cell_count_per_mL*100) %>%
arrange('percentage of total') %>%
return(df)
df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
select(1, 2, 4, 6) %>%
mutate('percentage of total' = `cells from total`/total_cell_count_per_mL*100) %>%
arrange('percentage of total')
df <- readxl::read_excel("example_data/example_data.xlsx")
df <- tidyr::pivot_longer(df, cols = -c(1:3))
flowmalizr <- function(df){
df <- df %>%
mutate('cells from total' = total_cell_count_per_mL*value/live_cells) %>%
select(1, 2, 4, 6) %>%
mutate('percentage of total' = `cells from total`/total_cell_count_per_mL*100) %>%
arrange('percentage of total')
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
select(1, 2, 4, 6) %>%
mutate(percentage_of_total = `cells from total`/total_cell_count_per_mL*100) %>%
arrange(percentage_of_total)
return(df)
}
flowmalizr(df)
flowmalizr <- function(df){
df <- df %>%
mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
select(1, 2, 4, 6) %>%
mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
arrange(percentage_of_total)
return(df)
}
flowmalizr(df)
df <- readxl::read_excel("example_data/example_data.xlsx")
df
df <- readxl::read_excel("example_data/example_data.xlsx")
df <- tidyr::pivot_longer(df, cols = -c(1:3))
df
library(devtools)
library(roxygen2)
library(testthat)
function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
df
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
load_all()
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
load_all()
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
#df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
#df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
flowmalizr(path = path_to_data)
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
# First function to normalize cell data
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
#' make_df
#'
#' @param file
#'
#' @return
#' @importFrom magrittr %>%
#' @export
#'
#' @examples
#' path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
#' flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
# Pull unique gated populations
unique.pops <- function(df){
unique <- df %>% dplyr::pull(name) %>%
unique()
return(unique)
}
flowmalizr(path = path_to_data)
xlsx_file <- readxl::read_excel(path)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(system.file("extdata", "example_data.xlsx",
package = "flowmalizr"))
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
xlsx_file <- readxl::read_excel(path_to_data)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path, path_to_data){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path, path_to_data){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
flowmalizr <- function(path, path_to_data){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
library(devtools)
library(roxygen2)
library(testthat)
library(available)
#' make_df
#'
#' @param file
#'
#' @return
#' @importFrom magrittr %>%
#' @export
#'
#' @examples
#' path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
#' flowmalizr(path = path_to_data)
# First function to normalize cell data
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
# Pull unique gated populations
unique.pops <- function(df){
unique <- df %>% dplyr::pull(name) %>%
unique()
return(unique)
}
# Plot percentage of unique populations
function(df){
pop <- ggplot2::ggplot(df) +
ggplot2::geom_bar(ggplot2::aes(y = df$percentage_of_total, fill = name))
return(pop)
}
flowmalizr(path = path_to_data)
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
path_to_data <- system.file("extdata", "example_data.xlsx", package = "flowmalizr")
flowmalizr(path = path_to_data)
flowmalizr <- function(path){
xlsx_file <- readxl::read_excel(path)
df <- tidyr::pivot_longer(xlsx_file, cols = -c(1:3))
df <- df %>%
dplyr::mutate(cells_from_total = total_cell_count_per_mL*value/live_cells) %>%
dplyr::select(1, 2, 4, 6) %>%
dplyr::mutate(percentage_of_total = cells_from_total/total_cell_count_per_mL*100) %>%
dplyr::arrange(percentage_of_total)
return(df)
df <- return(df)
}
flowmalizr(path = path_to_data)
